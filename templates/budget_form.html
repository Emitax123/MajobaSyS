{% extends "base.html" %}
{% load static %}
{% block content %}
    <link rel="stylesheet" href="{% static 'css/budget_form.css' %}" />
    <main class="budget-form-main">
        <section class="budget-form-section">
        <div class="budget-form-container">
            <h1>Solicitar Presupuesto</h1>

            {% if success %}
                <div class="budget-alert budget-alert--success">
                    <span class="budget-alert__icon">✓</span>
                    <div>
                        <strong>¡Solicitud enviada con éxito!</strong>
                        <p>Nos pondremos en contacto a la brevedad. Gracias por contactarnos.</p>
                    </div>
                </div>
            {% else %}
                {% if error %}
                    <div class="budget-alert budget-alert--error">
                        <span class="budget-alert__icon">✕</span>
                        <div>
                            <strong>Error al enviar</strong>
                            <p>{{ error }}</p>
                        </div>
                    </div>
                {% endif %}

                <form method="post" action="">
                {% csrf_token %}
                <label for="name">Nombre Completo:</label>
                <input type="text" id="name" name="name"
                       value="{{ form_data.name|default:'' }}" required />

                <label for="phone">Número de Teléfono:</label>
                <input type="tel" id="phone" name="phone"
                       value="{{ form_data.phone|default:'' }}" required />

                <label for="email">Correo Electrónico:</label>
                <input type="email" id="email" name="email"
                       value="{{ form_data.email|default:'' }}" required />

                <label for="project-details">Detalles del Proyecto:</label>
                <textarea id="project-details" name="project_details" rows="4" required>{{ form_data.project_details|default:'' }}</textarea>

                <button type="submit" class="submit-btn">Enviar Solicitud</button>
                </form>
            {% endif %}
        </div>
        </section>
    </main>

    <style>
        .budget-alert {
            display: flex;
            align-items: flex-start;
            gap: 1em;
            padding: 1.2em 1.5em;
            border-radius: 8px;
            margin-bottom: 1.5em;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        .budget-alert--success {
            background-color: #d4edda;
            border: 1px solid #a3d9a5;
            color: #1a5c2a;
        }
        .budget-alert--error {
            background-color: #fde8e8;
            border: 1px solid #f5a7a7;
            color: #7b1d1d;
        }
        .budget-alert__icon {
            font-size: 1.3rem;
            font-weight: 700;
            flex-shrink: 0;
            margin-top: 0.05em;
        }
        .budget-alert strong {
            display: block;
            margin-bottom: 0.2em;
            font-size: 1rem;
        }
        .budget-alert p {
            margin: 0;
        }
    </style>

{% endblock %}